<!DOCTYPE html>
<html lang="en">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<link rel="stylesheet" href="/assets/list.css">

<%- include('header') %>
    <body>
        

        <div class="container" id="shopping">
            <div class="col-12 text-center">
                <h1>Shopping List</h1>
                <div class="d-flex justify-content-center" id="add-items">
                    <form action="/user/list" method="post">
                        <input type="text" name="item" placeholder="Add your item" id="input-box">
                        <input type="number" name="quantity" placeholder="Quantity" id="quantity-box" min="0">
                        <button type="submit" class="btn btn-success">Add</button>
                    </form>
                </div>
                <div class="col-12">
                    <form action="/user/handle-checkboxes" method="post" id="shopping-item">
                        <table class="table table-hover" >
                            <thead>
                                <tr>
                                    <th class="text-center">Checked</th>
                                    <th class="text-center">Item</th>
                                    <th class="text-center">Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% for(var i=0; i<shoppingList.length; i++){ %>
                                    <tr>
                                        <!-- <td><%#= i+1 %></td> -->
                                        <td>
                                            <input type="checkbox" name="done[]" value="<%= shoppingList[i].shopping_id %>" onchange="submitForm()"/>
                                        </td>
                                        <!-- <td><%#= shoppingList[i] %></td> -->
                                        <td><%= shoppingList[i].shopping_item %></td>
                                        <td><%= shoppingList[i].shopping_quantity %></td>
                                    </tr>
                                <% } %>
                            </tbody>
                        </table>
                    </form>
                </div>
                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-danger"> Remind Me </button>
                </div>
            </div>
        </div>
        
    </body>
    <br> 
     <br> 
     <br> 
     <br> 
     <br> 
     <br> 
     <br> 
     <br>
    <%- include('footer') %>
    <script>
        function submitForm(){
            document.getElementById('shopping-item').submit();
        }
    </script>
</html>