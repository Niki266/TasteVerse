<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/list.css" type="text/css">
</head>


<%- include('header'); %>
<body>
  <div class="col-12 text-center">
    <h1>Calendar - <%= year %>/<%= month + 1 %></h1>
  </div>
  <div class="container mt-4">
    <div class="calendar col-12 text-center" data-year="<%= year %>" data-month="<%= month %>" data-firstDay="<%= firstDay %>">
      <div class="navigation">
        <button id="prevMonth">Previous Month</button>
        <button id="nextMonth">Next Month</button>
      </div>
    </div>
    <div class="col-12 d-flex justify-content-center mt-4">
      <table class="table-bordered">
        <tr>
          <th class="py-2 px-3">Sun</th>
          <th class="py-2 px-3">Mon</th>
          <th class="py-2 px-3">Tue</th>
          <th class="py-2 px-3">Wed</th>
          <th class="py-2 px-3">Thu</th>
          <th class="py-2 px-3">Fri</th>
          <th class="py-2 px-3">Sat</th>
        </tr>
        <tr>
          <% let currentDay = 1; %>
          <% for (let week = 0; week < 6; week++) { %>
            <tr>
              <% for (let day = 0; day < 7; day++) { %>
                <% if ((week === 0 && day < firstDay) || currentDay > daysInMonth) { %>
                  <td class="text-center" ></td>
                <% } else { %>
                  <td class="text-center date-cell rounded-circle" id="dates"><%= currentDay %></td>
                  <a href="/planner?date=<%= year %>-<%= month + 1 %>-<%= currentDay %>"></a>
                  <% currentDay++; %>
                <% } %>
              <% } %>
            </tr>
            <!-- </tr><tr> Start a new row for each week -->
          <% } %>
        </tr>
      </table>
    </div>
    <div id="popup" class="popup" style="display: none;">
      <%- include('popup.ejs') %>
    </div>
  </div>



  <script>
    const popup = document.getElementById('popup');
    const closePopupButton = document.getElementById('closePopup');
    const dateCells = document.querySelectorAll('.date-cell');

    function showPopup() {
      popup.style.display = 'block';
    } 
    function hidePopup() {
      popup.style.display = 'none';
    }
    dateCells.forEach((cell) => {
      cell.addEventListener('click', showPopup);
    });
    closePopupButton.addEventListener('click', hidePopup);
  </script>



  <%- include('footer'); %>
</body>

    

</html>